setwd("~/Harmanik")
load("~/Harmanik/Analysis2.RData")
View(df)
View(df)
load("~/Harmanik/Analysis2.RData")
summary(df)
summary(is.na(df$Station))
order(df$AT)
df[order(AT),'AT']
df[order(df$AT),'AT']
df[-order(df$AT),'AT']
df[order(-df$AT),'AT']
summary(is.na(df$Station))
summary(df)
df[order(-df$RH),'RH']
df[which(df$RH>100),'RH']
dim(df[which(df$RH>100),'RH'])
(df[which(df$RH>100),'RH']
df[which(df$RH>100),'RH']
summary(df)
(df[order(df$RH),'RH']
df[order(df$RH),'RH']
df[which(df$RH>20 | df$RH<80),'RH']
df[which(df$RH>20 & df$RH<80),'RH']
summary(df)
df[order(df$AT),'AT']
df[order(-df$AT),'AT']
summary(df)
df[order(df$WS),'WS']
df[order(-df$WS),'WS']
summary(df)
df[order(df$WD),'WD']
df[order(-df$WD),'WD']
df[order(df$SR),'SR']
df[order(-df$SR),'SR']
df[order(df$SR),'SR']
summary(df)
df[order(df$BP),'BP']
summary(df)
df[order(df$BP),'BP']
df[order(-df$BP),'BP']
df[order(df$BP),'BP']
df[which(df$BP>650 & df$BP<815),'BP']
summary(df)
df[order(df$PM2.5),'PM2.5']
df[whicch(df$PM2.5<0),'PM2.5']
df[which(df$PM2.5<0),'PM2.5']
df[which(df$PM2.5<=0),'PM2.5']
dim(df[which(df$PM2.5<=0),'PM2.5'])
nrows(df[which(df$PM2.5<=0),'PM2.5'])
nrow(df[which(df$PM2.5<=0),'PM2.5'])
length(df[which(df$PM2.5<=0),'PM2.5'])
df[order(-df$PM2.5),'PM2.5']
summary(df)
unique(df$Events)
df[order(df$PM2.5),'PM2.5']
df[order(-df$PM2.5),'PM2.5']
df[which(df$PM2.5==0),]
df[which(df$PM2.5<0),]
df[which(df$PM2.5<0),'PM2.5']
df[which(df$PM2.5<0),'PM2.5']<- NA
df[which(df$PM2.5<0),'PM2.5']
summary(df$PM2.5)
df[which(df$AT),'AT']
summary(df$AT)
df[order(df$AT),'AT']
df[order(df$AT),'AT']
df[which(df$AT<0),'AT']<- NA
df[order(df$AT),'AT']
df[order(-df$AT),'AT']
df[which(df$AT==631.98),'AT']<- NA
summary(df$AT)
summary(df$RH)
df[order(df$RH),'RH']
df[order(-df$AT),'AT']
df[order(-df$RH),'RH']
df[order(df$RH),'RH']
getwd()
save(list=ls(all=T),file='Analysis2.RData')
df[which(df$RH<20 | df$RH>80),'RH']<-NA
summary(df$RH)
summary(df$WS)
df[order(df$WS),'WS']
df[order(-df$WS),'WS']
df[which(df$WS>30),'WS']<-NA
summary(df$WS)
summary(df$SR)
df[order(df$SR),'SR']
df[which(df$SR<0),'SR']<-NA
summary(df$SR)
df[order(df$SR),'SR']
df[order(-df$SR),'SR']
summary(df$BP)
df[order(df$BP),'BP']
df[which(df$BP<655 | df$BP>810),'BP']<-NA
summary(df$BP)
summary(df$WD)
df[which(df$WD>360),'WD']<-NA
summary(df$WD)
colnames(df)
df <- df[,-c("Temp")]
df <- df[,-c(10)]
colnames(df)
summary(df)
save(list=ls(all=T),file='Analysis2.RData')
unique(df$Events)
temp<-lapply(df$Events,factor,
levels=c(1,0,2,3,4,5,6,7,8,9,10,11,12),
labels=unique(df$Events))
View(temp)
str(temp)
levels(temp)
levels(temp)
temp<-df
temp$Events<-data.frame(lapply(df$Events,factor,
levels=c(1,0,2,3,4,5,6,7,8,9,10,11,12),
labels=unique(df$Events)))
unique(df$Events)
temp<-df
temp$Events<-data.frame(lapply(df$Events,factor,
levels=c(0,1,2,3,4,5,6,7,8,9,10,11,12),
labels=c("","Fog","Rain","Fog,Rain,Hail,Thunderstorm",
"Fog , Rain","Rain , Thunderstorm","Fog , Thunderstorm","Fog , Rain , Thunderstorm",
"Rain , Hail , Thunderstorm","Hail , Thunderstorm","Snow , Thunderstorm","Fog , Tornado")))
temp<-df
temp$Events<-data.frame(lapply(df$Events,factor,
levels=c(0,1,2,3,4,5,6,7,8,9,10,11,12),
labels=c("","Fog","Rain","Thunderstorm","Fog,Rain,Hail,Thunderstorm",
"Fog , Rain","Rain , Thunderstorm","Fog , Thunderstorm","Fog , Rain , Thunderstorm",
"Rain , Hail , Thunderstorm","Hail , Thunderstorm","Snow , Thunderstorm","Fog , Tornado")))
?as.factor
levels(df$Events)
factors(df$Events)
labels(df$Events)
cat('\014')
unique(df$Events)
str(df$Events)
summary(df$Events)
as.numeric(levels(df$Events))[df$Events]
table(df$Events)
levels(df$Events)
temp<-str(df$Events)
View(df)
save(list=ls(all=T),file='Analysis2.RData')
View(df)
str(df$Events[1,'Events'])
str(df[1,'Events'])
str(df[97,'Events'])
str(df[96,'Events'])
str(df[unique(df$Events),'Events'])
as.numeric(df$Events)
unique(as.numeric(df$Events))
unique(df$Events)
df1<-unique(as.numeric(df$Events))
df<-df$Events[,as.numeric(df$Events)]
df$Events<-unique(as.numeric(df$Events))
df$Events<-as.numeric(df$Events)
temp$Events <- as.numeric(df$Events)
temp
temp<-df
temp$Events <- as.numeric(df$Events)
temp
unique(df$Events)
df[which(temp$Events==1),]
df[which(temp$Events==1),"Events"]
getwd()
setwd("/home/shah398/R project")
setwd("~/Harmanik")
load("~/Harmanik/Analysis2.RData")
save(list=ls(all=T),file='Analysis2.RData')
install.packages('gam')
library(gam)
install.packages('rJava')
library(rJava)
install.packages('bartMachine')
df.aot<-read.csv('/home/shah398/R project/AOT.csv')
df.aot$Date<-as.character(df.aot$Date)
df.aot$Date<-as.Date(df.aot$Date, format='%m/%d/%Y')
# Environmental variables data and processing  (2)
df.init<-read.csv('/home/shah398/R project/EnvVar.csv')
df.store<-df.init[,-2]
colnames(df.store)[1]<-'Date'
colnames(df.store)[2]<-'Station'
df.store$Date<-as.character(df.store$Date)
df.store$Date<-as.Date(df.store$Date, format='%d-%m-%Y')
summary(is.na(df.store$Date))
df<-merge(df.store, df.aot, by=c('Date', 'Station'), all.x = TRUE)  # (3) -> Merging (1) & (2)
df<-df[,-c(9, 11, 12, 13, 14, 15, 16, 18, 19, 20)]
# Additional temperature data and processing  (4)
df.temp<-read.csv('//home/shah398/R project/TemperatureData.csv')
df.temp$Date<-as.character(df.temp$Date)
df.temp$Date<-as.Date(df.temp$Date, format='%m/%d/%y')
df<-merge(df, df.temp, by='Date', all.x=T)  # (5) -> Merging (3) & (4)
df$GC<-0
df[which(df$Station=='AV'),'GC']<-3
df[which(df$Station=='IHBAS'),'GC']<-3
df[which(df$Station=='ITO'),'GC']<-3
df[which(df$Station=='MM'),'GC']<-3
df[which(df$Station=='NSIT'),'GC']<-0
df[which(df$Station=='PUSA'),'GC']<-4
df[which(df$Station=='RKP'),'GC']<-3
df[which(df$Station=='LODHI'),'GC']<-3
df[which(df$Station=='CRRI'),'GC']<-2
df[which(df$Station=='DTU'),'GC']<-0
df[which(df$Station=='SIRI'),'GC']<-2
df[which(df$Station=='AYA'),'GC']<-2
df[which(df$Station=='BC'),'GC']<-3
df[which(df$Station=='EAN'),'GC']<-0
df[which(df$Station=='IGI'),'GC']<-0
df[which(df$Station=='NC'),'GC']<-4
df[which(df$Station=='PB'),'GC']<-0
df[which(df$Station=='SHAD'),'GC']<-4
df$GC<-as.factor(df$GC)
rm(df.aot,df.init,df.store,df.temp)
summary(df)
# data cleaning intense----
##PM 2.5
df[which(df$PM2.5<0),'PM2.5']<- NA
summary(df$PM2.5)
#Looks ok. PM 2.5 of 1000 was recorded in Delhi. PM2.5 = 3897.31 can be a outlier.
#Cleaned bitch!
##AT
summary(df$AT)
#Since here we get lowest value of AT as -66648.01, which is obviously nonsense. So, we need to delete the large negative values and large positive values.
df[order(df$AT),'AT']
df[which(df$AT<0),'AT']<- NA
df[order(-df$AT),'AT']
#Here, 631.98 is obviously nonsense value which we remove from the dataset.
df[which(df$AT==631.98),'AT']<- NA
##RH
summary(df$RH)
df[order(df$RH),'RH']
df[order(-df$RH),'RH']
#RH should be between 20%-80%(historical). It cannot be 0 as well as greater than 100%.
df[which(df$RH<20 | df$RH>80),'RH']<-NA
##WS
summary(df$WS)
df[order(df$WS),'WS']
df[order(-df$WS),'WS']
#The wind speed vcalues above 30 are considered as mistaken and are deleted since the units are in m/s.
df[which(df$WS>30),'WS']<-NA
##SR
summary(df$SR)
df[order(df$SR),'SR']
df[order(-df$SR),'SR']
#Any negative values of SR is not practical and hence removed
df[which(df$SR<0),'SR']<-NA
##BP
summary(df$BP)
df[order(df$BP),'BP']
df[order(-df$BP),'BP']
#Any negative values of SR is not practical and hence removed
df[which(df$BP<655 | df$BP>810),'BP']<-NA
## WD
summary(df$WD)
# As any angle above 360 is not possible in degrees
df[which(df$WD>360),'WD']<-NA
## Dropping Temp
colnames(df)
# Bad data, hence we sourced dta from AccuWeather.
df <- df[,-c(10)]
unique(df$Events)
df
df.aot<-read.csv('/home/shah398/R project/AOT.csv')
getwd()
setwd("~/Harmanik")
load("~/Harmanik/Analysis2.RData")
df.aot<-read.csv('/home/shah398/R project/AOT.csv')
df.aot<-read.csv('/home/sonin/Harmanik/AOT.csv')
df.aot$Date<-as.character(df.aot$Date)
df.aot$Date<-as.Date(df.aot$Date, format='%m/%d/%Y')
df.init<-read.csv('/home/shah398/R project/EnvVar.csv')
df.init<-read.csv('/home/sonin/Harmanik/EnvVar.csv')
df.store<-df.init[,-2]
colnames(df.store)[1]<-'Date'
colnames(df.store)[2]<-'Station'
df.store$Date<-as.character(df.store$Date)
df.store$Date<-as.Date(df.store$Date, format='%d-%m-%Y')
summary(is.na(df.store$Date))
df<-merge(df.store, df.aot, by=c('Date', 'Station'), all.x = TRUE)  # (3) -> Merging (1) & (2)
df<-df[,-c(9, 11, 12, 13, 14, 15, 16, 18, 19, 20)]
df.temp<-read.csv('//home/sonin/Harmanik/TemperatureData.csv')
df.temp$Date<-as.character(df.temp$Date)
df.temp$Date<-as.Date(df.temp$Date, format='%m/%d/%y')
df<-merge(df, df.temp, by='Date', all.x=T)  # (5) -> Merging (3) & (4)
df$GC<-0
df[which(df$Station=='AV'),'GC']<-3
df[which(df$Station=='IHBAS'),'GC']<-3
df[which(df$Station=='ITO'),'GC']<-3
df[which(df$Station=='MM'),'GC']<-3
df[which(df$Station=='NSIT'),'GC']<-0
df[which(df$Station=='PUSA'),'GC']<-4
df[which(df$Station=='RKP'),'GC']<-3
df[which(df$Station=='LODHI'),'GC']<-3
df[which(df$Station=='CRRI'),'GC']<-2
df[which(df$Station=='DTU'),'GC']<-0
df[which(df$Station=='SIRI'),'GC']<-2
df[which(df$Station=='AYA'),'GC']<-2
df[which(df$Station=='BC'),'GC']<-3
df[which(df$Station=='EAN'),'GC']<-0
df[which(df$Station=='IGI'),'GC']<-0
df[which(df$Station=='NC'),'GC']<-4
df[which(df$Station=='PB'),'GC']<-0
df[which(df$Station=='SHAD'),'GC']<-4
df$GC<-as.factor(df$GC)
rm(df.aot,df.init,df.store,df.temp)
summary(df)
View(df)
df[which(df$PM2.5<0),'PM2.5']<- NA
summary(df$PM2.5)
#Looks ok. PM 2.5 of 1000 was recorded in Delhi. PM2.5 = 3897.31 can be a outlier.
#Cleaned bitch!
##AT
summary(df$AT)
#Since here we get lowest value of AT as -66648.01, which is obviously nonsense. So, we need to delete the large negative values and large positive values.
df[order(df$AT),'AT']
df[which(df$AT<0),'AT']<- NA
df[order(-df$AT),'AT']
#Here, 631.98 is obviously nonsense value which we remove from the dataset.
df[which(df$AT==631.98),'AT']<- NA
##RH
summary(df$RH)
df[order(df$RH),'RH']
df[order(-df$RH),'RH']
#RH should be between 20%-80%(historical). It cannot be 0 as well as greater than 100%.
df[which(df$RH<20 | df$RH>80),'RH']<-NA
##WS
summary(df$WS)
df[order(df$WS),'WS']
df[order(-df$WS),'WS']
#The wind speed vcalues above 30 are considered as mistaken and are deleted since the units are in m/s.
df[which(df$WS>30),'WS']<-NA
##SR
summary(df$SR)
df[order(df$SR),'SR']
df[order(-df$SR),'SR']
#Any negative values of SR is not practical and hence removed
df[which(df$SR<0),'SR']<-NA
##BP
summary(df$BP)
df[order(df$BP),'BP']
df[order(-df$BP),'BP']
#Any negative values of SR is not practical and hence removed
df[which(df$BP<655 | df$BP>810),'BP']<-NA
## WD
summary(df$WD)
# As any angle above 360 is not possible in degrees
df[which(df$WD>360),'WD']<-NA
colnames(df)
df <- df[,-c(10)]
unique(df$Events)
temp<-df
temp$Events <- as.numeric(df$Events)
df[which(temp$Events==1),"Events"]
df[which(temp$Events==1),]
factor.table<-data.frame(c(as.numeric(df$Events),unique(df$Events)))
View(factor.table)
unique(df$Events)
factor.table<-data.frame(as.numeric(df$Events),unique(df$Events))
factor.table<-data.frame(unique(as.numeric(df$Events)),unique(df$Events))
View(factor.table)
View(df)
as.numeric(df[97,'Events'])
colnames(factor.table)<-c('Value', 'Event')
factor.table<-factor.table[order(factor.table$Value),]
View(factor.table)
summary(df)
df[which(df$Date=2016-01-01),'BP']
df[which(df$Date='2016-01-01'),'BP']
df[which(df$Date=='2016-01-01'),'BP']
df[which(df$Date=='2016-01-01'),c('Station','BP')]
df[which(df$Date=='2016-01-05'),c('Station','BP')]
df[which(df$Date=='2017-01-05'),c('Station','BP')]
View(df)
dim(df[complete.cases(df),])
temp<-dim(df[complete.cases(df),])
temp<-df[complete.cases(df),]
View(temp)
unique(df$Date)
unique(temp$Date)
colnames(df)
summary(is.na(df$Station))
save(list=ls(all=T),file='Analysis2.RData')
ncol(df)
View(df)
temp<-df[-which(is.na(df$PM2.5)),]
View(temp)
summary(is.na(df$PM2.5))
summary(is.na(temp$PM2.5))
temp<-df[!(rowSums(is.na(df))==(NCOL(df))-11),]
temp<-df[-which(is.na(df$PM2.5)),]
temp<-temp[!(rowSums(is.na(temp))==(NCOL(temp))-11),]
View(temp)
temp<-temp[!(rowSums(is.na(temp))==(NCOL(temp))-11),]
View(temp)
temp<-df[-which(is.na(df$PM2.5)),]
temp<-temp[!(rowSums(is.na(temp))==(NCOL(temp))-12),]
View(temp)
temp<-df[-which(is.na(df$PM2.5)),]
temp<-temp[!(rowSums(is.na(temp))==(NCOL(temp)-12)),]
View(temp)
temp<-df[-which(is.na(df$PM2.5)),]
temp<-temp[!(rowSums(is.na(temp))==(NCOL(temp)-12)),]
View(temp)
temp<-df[-which(is.na(df$PM2.5)),]
str(temp)
summary(temp)
temp<-df[-which(is.na(df$PM2.5)),]
temp<-temp[!(rowSums(is.na(temp))==(NCOL(temp)-11)),]
View(temp)
rowSums(is.na(temp))
rowSums(is.na(temp[1,]))
rowSums(is.na(temp[2,]))
View(temp)
rowSums(is.na(temp[14,]))
ncol(temp)
temp<-df[-which(is.na(df$PM2.5)),]
temp<-temp[!(rowSums(is.na(temp))==(NCOL(temp)-12)),]
View(temp)
temp<-df[-which(is.na(df$PM2.5)),]
temp<-temp[!(rowSums(is.na(temp))=(NCOL(temp)-12)),]
temp<-df[-which(is.na(df$PM2.5)),]
temp<-temp[!(rowSums(is.na(temp))==(NCOL(temp)-11)),]
View(temp)
rowSums(is.na(temp[1,]))
temp<-df[-which(is.na(df$PM2.5)),]
temp<-temp[!(rowSums(is.na(temp))>(NCOL(temp)-11)),]
View(temp)
temp<-df[-which(is.na(df$PM2.5)),]
temp<-temp[!(rowSums(is.na(temp))>(NCOL(temp)-12)),]
View(temp)
cat('\014')
save(list=ls(all=T),file='Analysis2.RData')
df<-temp
View(df)
View(factor.table)
temp$Events<-as.numeric(temp$Events)
str(temp)
temp<-df
temp$Events<-as.factor(as.numeric(temp$Events))
str(temp)
View(factor.table)
levels(temp$Events)
View(factor.table)
df<-temp
View(df)
save(list=ls(all=T),file='Analysis2.RData')
